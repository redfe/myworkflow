# 実装方針

## プロジェクト概要

このプロジェクトは SvelteKit を使用した Web アプリケーションです。

## 技術スタック

- **フロントエンド**

  - SvelteKit
  - TypeScript
  - Vite (ビルドツール)
  - Skeleton (UI フレームワーク)

- **バックエンド**

  - Node.js
  - Prisma (ORM)

- **開発環境**

  - Docker
  - docker-compose

- **テスト**

  - Vitest (ユニットテスト)
  - Playwright (E2Eテスト)

- **その他**
  - ESLint (コード品質管理)
  - ParaglideJS (多言語対応)

## ディレクトリ構成

```
src/
  ├── lib/          # 共通コンポーネントやユーティリティ
  │   ├── components/  # 共通UIコンポーネント
  │   ├── constants/  # 定数定義
  │   ├── db/        # データベース関連
  │   └── paraglide/ # 多言語化関連
  ├── routes/       # ページコンポーネント
  └── hooks.ts      # SvelteKit フック

prisma/
  └── schema.prisma # データベーススキーマ

e2e/               # E2Eテスト
messages/          # 多言語化リソース
  ├── en.json     # 英語リソース
  └── ja.json     # 日本語リソース
```

## 開発フロー

1. 機能開発

   - 機能要件の確認
   - コンポーネント設計
   - 実装
   - ユニットテスト作成

2. テスト

   - ユニットテストの実行
   - E2Eテストの実行
   - 手動テスト

3. デプロイ
   - ビルド
   - 動作確認
   - リリース

## コーディング規約

- TypeScript の型を積極的に活用
- コンポーネントは可能な限り小さく保つ
- テストカバレッジの維持
- Skeleton UI のコンポーネントとスタイリングガイドラインの遵守
- ParaglideJS による多言語対応の徹底
  - メッセージはすべて messages/ 配下の言語ファイルで管理
  - ハードコードされた文字列を避ける

## UI設計指針

- Skeleton UI フレームワークの活用
  - 一貫性のあるデザインシステムの維持
  - アクセシビリティ対応
  - レスポンシブデザインの実装
  - ダークモード対応

## 多言語対応 (i18n)

- ParaglideJS を使用した多言語対応
  - TypeScript による型安全な翻訳キーの管理
  - 言語切り替え機能の実装
  - 日本語（ja）と英語（en）のサポート
  - 必要に応じて他言語の追加が可能な設計
  - メッセージの管理ルール
    - キーの命名規則: `{カテゴリ}_{名前}`
    - プレースホルダーの活用
    - 複数形対応

## データベース設計

- Prisma スキーマでのデータモデル定義
- マイグレーション管理の徹底

## セキュリティ考慮事項

- 入力値のバリデーション
- XSS対策
- CSRF対策
- 適切な認証・認可の実装

## パフォーマンス最適化

- ビルド最適化
- 画像の最適化
- キャッシュ戦略
- バンドルサイズの最適化

## 今後の展望

- CI/CD パイプラインの整備
- モニタリングの導入
- パフォーマンス測定の自動化
- アクセシビリティ対応の強化
